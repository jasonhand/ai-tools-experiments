---
import MainLayout from '../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';

// Get all episodes to extract participants data
const allEpisodes = await getCollection('episodes');

// Process participants data
const participantsMap = new Map();

allEpisodes.forEach(episode => {
    if (episode.data.participants && episode.data.participants.length > 0) {
        episode.data.participants.forEach(participant => {
            if (!participantsMap.has(participant)) {
                participantsMap.set(participant, {
                    name: participant,
                    episodes: [],
                    count: 0
                });
            }
            
            const participantData = participantsMap.get(participant);
            participantData.episodes.push({
                number: episode.data.episodeNumber,
                title: episode.data.title,
                slug: `ep${episode.data.episodeNumber.toString().padStart(2, '0')}`
            });
            participantData.count++;
        });
    }
});

// Convert to array and sort by episode count (descending)
const participants = Array.from(participantsMap.values()).sort((a, b) => b.count - a.count);

// Sort episodes for each participant by episode number
participants.forEach(participant => {
    participant.episodes.sort((a, b) => a.number - b.number);
});
---

<MainLayout title="About" description="Learn more about AI Tools Lab and our mission to explore AI tools and technologies">
    <main class="container about-section">
            <!-- What is AI Tools Lab Section -->
            <div class="section-what-is">
                <div class="logo-container">
                    <img src="/images/ai-tools-lab-logo.png" alt="AI Tools Lab" class="about-logo">
                </div>
                <div class="content-container">
                    <h2>What is AI Tools Lab?</h2>
                    <p>
                        AI Tools Lab consists of 30-40 minute recorded technical demonstrations of hands-on (early or first) 
                        experiences with AI-related tooling for developers. Each episode explores different aspects of 
                        AI tools and their practical applications in software development.
                    </p>
                </div>
            </div>
            
            <!-- Why AI Tools Lab Section -->
            <div class="section-why">
                <h2>Why AI Tools Lab?</h2>
                <p>
                    Our goal is to help teams navigate the AI era by leading discussions, demos, and observations 
                    that are grounded in curiosity and honest experiences. By sharing these insights, we aim to 
                    be leaders, not laggers, through this technological transition.
                </p>
                <p>
                    What it means to be a developer is changing rapidly. Therefore, what it means to be a developer 
                    advocate is changing rapidly as well. Through AI Tools Lab, we explore these changes together.
                </p>
            </div>
            
            <!-- Our Goals Section -->
            <div class="section-goals">
                <h2>Our Goals</h2>
                <ul class="goals-list">
                    <li>
                        <strong>Education and Opinion Formation:</strong> To educate ourselves and form opinions on new 
                        (AI-related) technologies, tools, and processes in order to better understand today's challenges, 
                        solutions, and current thinking in order to be a better advocate for the modern developer.
                    </li>
                    <li>
                        <strong>Building Credibility:</strong> Build credibility and reputation as leaders in engineering 
                        excellence as it relates to AI developer tools and thought leadership.
                    </li>
                    <li>
                        <strong>Team Education:</strong> Educate team about new technology and approaches in our space.
                    </li>
                    <li>
                        <strong>Collaboration:</strong> Foster collaboration with teammates.
                    </li>
                </ul>
            </div>
            
            <!-- Participants Section -->
            {participants.length > 0 && (
                <div class="section-participants">
                    <h2>Our Contributors</h2>
                    <p class="participants-intro">
                        Meet the amazing people who have shared their expertise and insights across our episodes.
                    </p>
                    <div class="participants-grid">
                        {participants.map(participant => (
                            <div class="participant-card">
                                <div class="participant-header">
                                    <h3 class="participant-name">{participant.name}</h3>
                                    <div class="participant-stats">
                                        <span class="episode-count">
                                            {participant.count} episode{participant.count !== 1 ? 's' : ''}
                                        </span>
                                    </div>
                                </div>
                                <div class="participant-episodes">
                                    <h4>Episodes:</h4>
                                    <div class="episode-links">
                                        {participant.episodes.map(episode => (
                                            <a 
                                                href={`/episodes/${episode.slug}`}
                                                class="episode-link"
                                                title={episode.title}
                                            >
                                                <span class="episode-number">#{episode.number}</span>
                                                <span class="episode-title">{episode.title}</span>
                                            </a>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            )}
    </main>
    
    <script is:inline src="/script.js"></script>
</MainLayout>

<style>
    /* About page container styling to match episode pages */
    .about-section {
        background-color: white;
        border-radius: 8px;
        padding: 2rem;
        box-shadow: var(--shadow);
        margin-top: -1rem;
        margin-bottom: 2rem;
        position: relative;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
    }

    /* What is AI Tools Lab Section - Special layout with logo */
    .section-what-is {
        background: linear-gradient(135deg, var(--light-color) 0%, #ffffff 100%) !important;
        border-left: 6px solid var(--accent-color) !important;
        padding: 0 !important;
        margin: 2rem 0 !important;
        border-radius: 16px !important;
        box-shadow: 0 12px 40px rgba(108, 117, 107, 0.15), 0 4px 16px rgba(108, 117, 107, 0.1) !important;
        position: relative !important;
        overflow: hidden !important;
        transition: transform 0.3s ease, box-shadow 0.3s ease !important;
        display: flex !important;
        align-items: stretch !important;
    }

    .section-what-is:hover {
        transform: translateY(-2px) !important;
        box-shadow: 0 16px 48px rgba(108, 117, 107, 0.2), 0 6px 20px rgba(108, 117, 107, 0.15) !important;
    }

    .logo-container {
        background: linear-gradient(145deg, #3a1c71, #d76d77, #ffaf7b) !important;
        position: relative !important;
        padding: 2.5rem !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        min-width: 300px !important;
        flex-shrink: 0 !important;
    }

    .logo-container::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        background-color: rgba(58, 28, 113, 0.6);
        z-index: 1;
        pointer-events: none;
    }

    .about-logo {
        width: 200px !important;
        height: auto !important;
        position: relative !important;
        z-index: 2 !important;
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3)) !important;
    }

    .content-container {
        padding: 2.5rem !important;
        flex: 1 !important;
    }

    .content-container h2 {
        color: var(--primary-color) !important;
        margin: 0 0 1.5rem 0 !important;
        font-size: 1.8rem !important;
        font-weight: 600 !important;
        border-bottom: 2px solid var(--accent-color) !important;
        padding-bottom: 0.5rem !important;
    }

    .content-container p {
        font-size: 1.15rem !important;
        line-height: 1.8 !important;
        margin-bottom: 0 !important;
        color: #555 !important;
    }

    /* Why AI Tools Lab Section */
    .section-why {
        background: linear-gradient(135deg, var(--light-color) 0%, var(--secondary-color) 50%, var(--primary-color) 100%) !important;
        border-radius: 16px !important;
        padding: 2.5rem !important;
        margin: 0 0 2rem 0 !important;
        box-shadow: 0 12px 40px rgba(147, 172, 181, 0.2), 0 4px 16px rgba(147, 172, 181, 0.15) !important;
        position: relative !important;
        transition: transform 0.3s ease, box-shadow 0.3s ease !important;
    }

    .section-why:hover {
        transform: translateY(-2px) !important;
        box-shadow: 0 16px 48px rgba(147, 172, 181, 0.25), 0 6px 20px rgba(147, 172, 181, 0.2) !important;
    }

    .section-why h2 {
        color: white !important;
        margin: 0 0 1.5rem 0 !important;
        font-size: 1.3rem !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        letter-spacing: 1px !important;
        background: rgba(255, 255, 255, 0.1) !important;
        padding: 1rem 1.5rem !important;
        border-radius: 12px !important;
        backdrop-filter: blur(15px) !important;
    }

    .section-why p {
        background: rgba(255, 255, 255, 0.95) !important;
        margin: 1rem 0 !important;
        padding: 1.2rem 1.8rem !important;
        border-radius: 12px !important;
        border-left: 5px solid var(--secondary-color) !important;
        transition: all 0.3s ease !important;
        backdrop-filter: blur(15px) !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05) !important;
        font-size: 1.05rem !important;
        line-height: 1.7 !important;
        color: var(--primary-color) !important;
    }

    .section-why p:hover {
        transform: translateX(8px) !important;
        box-shadow: 0 8px 24px rgba(147, 172, 181, 0.2) !important;
        background: white !important;
    }

    /* Our Goals Section */
    .section-goals {
        background: linear-gradient(135deg, var(--light-color) 0%, var(--highlight-color) 30%, var(--accent-color) 100%) !important;
        border-radius: 16px !important;
        padding: 2.5rem !important;
        margin: 0 0 2rem 0 !important;
        box-shadow: 0 12px 40px rgba(169, 211, 255, 0.2), 0 4px 16px rgba(169, 211, 255, 0.15) !important;
        position: relative !important;
        transition: transform 0.3s ease, box-shadow 0.3s ease !important;
    }

    .section-goals:hover {
        transform: translateY(-2px) !important;
        box-shadow: 0 16px 48px rgba(169, 211, 255, 0.25), 0 6px 20px rgba(169, 211, 255, 0.2) !important;
    }

    .section-goals h2 {
        color: white !important;
        margin: 0 0 1.5rem 0 !important;
        font-size: 1.3rem !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        letter-spacing: 1px !important;
        background: rgba(255, 255, 255, 0.1) !important;
        padding: 1rem 1.5rem !important;
        border-radius: 12px !important;
        backdrop-filter: blur(15px) !important;
    }

    .goals-list {
        list-style: none !important;
        padding: 0 !important;
        margin: 0 !important;
    }

    .goals-list li {
        background: rgba(255, 255, 255, 0.95) !important;
        margin: 1rem 0 !important;
        padding: 1.2rem 1.8rem !important;
        border-radius: 12px !important;
        border-left: 5px solid var(--accent-color) !important;
        transition: all 0.3s ease !important;
        backdrop-filter: blur(15px) !important;
        color: var(--primary-color) !important;
        font-weight: 500 !important;
        line-height: 1.6 !important;
        position: relative !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05) !important;
        font-size: 1.05rem !important;
    }

    .goals-list li::before {
        content: "✨" !important;
        margin-right: 0.8rem !important;
        font-size: 1.1rem !important;
        color: var(--accent-color) !important;
    }

    .goals-list li:hover {
        transform: translateX(8px) !important;
        box-shadow: 0 8px 24px rgba(169, 211, 255, 0.2) !important;
        background: white !important;
    }

    .goals-list li strong {
        color: var(--primary-color) !important;
        font-weight: 700 !important;
    }

    /* Participants Section */
    .section-participants {
        background: linear-gradient(135deg, var(--light-color) 0%, #f8f9fa 50%, var(--highlight-color) 100%) !important;
        border-radius: 16px !important;
        padding: 2.5rem !important;
        margin: 2rem 0 !important;
        box-shadow: 0 12px 40px rgba(169, 211, 255, 0.15), 0 4px 16px rgba(169, 211, 255, 0.1) !important;
        position: relative !important;
        transition: transform 0.3s ease, box-shadow 0.3s ease !important;
    }

    .section-participants:hover {
        transform: translateY(-2px) !important;
        box-shadow: 0 16px 48px rgba(169, 211, 255, 0.2), 0 6px 20px rgba(169, 211, 255, 0.15) !important;
    }

    .section-participants h2 {
        color: var(--primary-color) !important;
        margin: 0 0 1rem 0 !important;
        font-size: 2rem !important;
        font-weight: 700 !important;
        text-align: center !important;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color)) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
    }

    .participants-intro {
        text-align: center !important;
        font-size: 1.1rem !important;
        color: var(--secondary-color) !important;
        margin-bottom: 2.5rem !important;
        font-weight: 500 !important;
    }

    .participants-grid {
        display: grid !important;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)) !important;
        gap: 1.5rem !important;
    }

    .participant-card {
        background: white !important;
        border-radius: 12px !important;
        padding: 1.5rem !important;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08) !important;
        transition: all 0.3s ease !important;
        border: 2px solid transparent !important;
        position: relative !important;
        overflow: hidden !important;
    }

    .participant-card::before {
        content: '' !important;
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        height: 4px !important;
        background: linear-gradient(90deg, var(--accent-color), var(--highlight-color)) !important;
    }

    .participant-card:hover {
        transform: translateY(-4px) !important;
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12) !important;
        border-color: var(--accent-color) !important;
    }

    .participant-header {
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
        margin-bottom: 1.5rem !important;
        padding-bottom: 1rem !important;
        border-bottom: 2px solid var(--light-color) !important;
    }

    .participant-name {
        color: var(--primary-color) !important;
        font-size: 1.3rem !important;
        font-weight: 700 !important;
        margin: 0 !important;
    }

    .participant-stats {
        background: var(--accent-color) !important;
        color: white !important;
        padding: 0.4rem 1rem !important;
        border-radius: 20px !important;
        font-size: 0.9rem !important;
        font-weight: 600 !important;
    }

    .participant-episodes h4 {
        color: var(--secondary-color) !important;
        font-size: 1rem !important;
        font-weight: 600 !important;
        margin: 0 0 1rem 0 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
    }

    .episode-links {
        display: flex !important;
        flex-direction: column !important;
        gap: 0.75rem !important;
    }

    .episode-link {
        display: flex !important;
        align-items: center !important;
        gap: 0.75rem !important;
        padding: 0.75rem !important;
        background: var(--light-color) !important;
        border-radius: 8px !important;
        text-decoration: none !important;
        transition: all 0.3s ease !important;
        border-left: 3px solid transparent !important;
    }

    .episode-link:hover {
        background: var(--highlight-color) !important;
        border-left-color: var(--accent-color) !important;
        transform: translateX(4px) !important;
    }

    .episode-number {
        background: var(--primary-color) !important;
        color: white !important;
        padding: 0.25rem 0.6rem !important;
        border-radius: 12px !important;
        font-size: 0.8rem !important;
        font-weight: 700 !important;
        min-width: 2.5rem !important;
        text-align: center !important;
        flex-shrink: 0 !important;
    }

    .episode-title {
        color: var(--primary-color) !important;
        font-weight: 500 !important;
        font-size: 0.95rem !important;
        line-height: 1.4 !important;
        flex: 1 !important;
    }

    /* Responsive design */
    @media (max-width: 768px) {
        .about-content {
            padding: 1.5rem;
        }

        .section-what-is {
            flex-direction: column !important;
        }

        .logo-container {
            min-width: auto !important;
            padding: 2rem !important;
        }

        .about-logo {
            width: 150px !important;
        }

        .content-container {
            padding: 2rem !important;
        }

        .content-container h2 {
            font-size: 1.5rem !important;
        }

        .section-why,
        .section-goals {
            padding: 1.5rem !important;
        }

        .section-why h2,
        .section-goals h2 {
            font-size: 1rem !important;
            padding: 0.8rem 1rem !important;
        }

        .section-why p,
        .goals-list li {
            padding: 0.8rem 1rem !important;
            font-size: 1rem !important;
        }

        .section-why p:hover,
        .goals-list li:hover {
            transform: translateX(4px) !important;
        }

        .section-participants {
            padding: 1.5rem !important;
        }

        .section-participants h2 {
            font-size: 1.5rem !important;
        }

        .participants-grid {
            grid-template-columns: 1fr !important;
            gap: 1rem !important;
        }

        .participant-card {
            padding: 1rem !important;
        }

        .participant-header {
            flex-direction: column !important;
            align-items: flex-start !important;
            gap: 0.75rem !important;
        }

        .participant-name {
            font-size: 1.1rem !important;
        }

        .episode-link:hover {
            transform: translateX(2px) !important;
        }
    }
</style> 